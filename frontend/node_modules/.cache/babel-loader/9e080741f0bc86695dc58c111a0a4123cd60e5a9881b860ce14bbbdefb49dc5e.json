{"ast":null,"code":"import _slicedToArray from\"/Users/deborahketema/Downloads/jvlcart-main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{toast}from\"react-toastify\";import{updateProfile,clearAuthError}from\"../../actions/userActions\";import{clearUpdateProfile}from\"../../slices/authSlice\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UpdateProfile(){var _useSelector=useSelector(function(state){return state.authState;}),error=_useSelector.error,user=_useSelector.user,isUpdated=_useSelector.isUpdated;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),avatar=_useState6[0],setAvatar=_useState6[1];var _useState7=useState(\"/images/default_avatar.png\"),_useState8=_slicedToArray(_useState7,2),avatarPreview=_useState8[0],setAvatarPreview=_useState8[1];var dispatch=useDispatch();var onChangeAvatar=function onChangeAvatar(e){var reader=new FileReader();reader.onload=function(){if(reader.readyState===2){setAvatarPreview(reader.result);setAvatar(e.target.files[0]);}};reader.readAsDataURL(e.target.files[0]);};var submitHandler=function submitHandler(e){e.preventDefault();var formData=new FormData();formData.append('name',name);formData.append('email',email);formData.append('avatar',avatar);dispatch(updateProfile(formData));};useEffect(function(){if(user){setName(user.name);setEmail(user.email);if(user.avatar){setAvatarPreview(user.avatar);}}if(isUpdated){toast('Profile updated successfully',{type:'success',position:toast.POSITION.BOTTOM_CENTER,onOpen:function onOpen(){return dispatch(clearUpdateProfile());}});return;}if(error){toast(error,{position:toast.POSITION.BOTTOM_CENTER,type:'error',onOpen:function onOpen(){dispatch(clearAuthError);}});return;}},[user,isUpdated,error,dispatch]);return/*#__PURE__*/_jsx(\"div\",{className:\"row wrapper\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-10 col-lg-5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,className:\"shadow-lg\",encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mt-2 mb-5\",children:\"Update Profile\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"name\",id:\"name_field\",className:\"form-control\",name:\"name\",value:name,onChange:function onChange(e){return setName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email_field\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email_field\",className:\"form-control\",name:\"email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"avatar_upload\",children:\"Avatar\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex align-items-center\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"figure\",{className:\"avatar mr-3 item-rtl\",children:/*#__PURE__*/_jsx(\"img\",{src:avatarPreview,className:\"rounded-circle\",alt:\"Avatar Preview\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"custom-file\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"avatar\",className:\"custom-file-input\",id:\"customFile\",onChange:onChangeAvatar}),/*#__PURE__*/_jsx(\"label\",{className:\"custom-file-label\",htmlFor:\"customFile\",children:\"Choose Avatar\"})]})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn update-btn btn-block mt-4 mb-3\",children:\"Update\"})]})})});}","map":{"version":3,"names":["useEffect","useState","useDispatch","useSelector","toast","updateProfile","clearAuthError","clearUpdateProfile","UpdateProfile","state","authState","error","user","isUpdated","name","setName","email","setEmail","avatar","setAvatar","avatarPreview","setAvatarPreview","dispatch","onChangeAvatar","e","reader","FileReader","onload","readyState","result","target","files","readAsDataURL","submitHandler","preventDefault","formData","FormData","append","type","position","POSITION","BOTTOM_CENTER","onOpen","value"],"sources":["/Users/deborahketema/Downloads/jvlcart-main/frontend/src/components/user/UpdateProfile.js"],"sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { toast } from \"react-toastify\";\nimport { updateProfile, clearAuthError } from \"../../actions/userActions\";\nimport { clearUpdateProfile } from \"../../slices/authSlice\";\n\nexport default function UpdateProfile () {\n    const {  error, user, isUpdated } = useSelector(state => state.authState);\n    const [name, setName] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [avatar, setAvatar] = useState(\"\");\n    const [avatarPreview, setAvatarPreview] = useState(\"/images/default_avatar.png\");\n    const dispatch = useDispatch();\n\n    const onChangeAvatar = (e) => {\n        const reader = new FileReader();\n        reader.onload = () => {\n             if(reader.readyState === 2) {\n                 setAvatarPreview(reader.result);\n                 setAvatar(e.target.files[0])\n             }\n        }\n\n\n        reader.readAsDataURL(e.target.files[0])\n    }\n\n    const submitHandler  = (e) =>{\n        e.preventDefault();\n        const formData = new FormData();\n        formData.append('name', name)\n        formData.append('email', email)\n        formData.append('avatar', avatar);\n        dispatch(updateProfile(formData))\n    }\n\n    useEffect(() => {\n        if(user) {\n            setName(user.name);\n            setEmail(user.email);\n            if(user.avatar) {\n                setAvatarPreview(user.avatar)\n            }\n        }\n\n        if(isUpdated) {\n            toast('Profile updated successfully',{\n                type: 'success',\n                position: toast.POSITION.BOTTOM_CENTER,\n                onOpen: () => dispatch(clearUpdateProfile())\n            })\n            return;\n        }\n\n        if(error)  {\n            toast(error, {\n                position: toast.POSITION.BOTTOM_CENTER,\n                type: 'error',\n                onOpen: ()=> { dispatch(clearAuthError) }\n            })\n            return\n        }\n    },[user, isUpdated, error, dispatch])\n\n    return (  \n    <div className=\"row wrapper\">\n        <div className=\"col-10 col-lg-5\">\n            <form onSubmit={submitHandler} className=\"shadow-lg\" encType='multipart/form-data'>\n                <h1 className=\"mt-2 mb-5\">Update Profile</h1>\n\n                <div className=\"form-group\">\n                    <label htmlFor=\"email_field\">Name</label>\n                    <input \n                        type=\"name\" \n                        id=\"name_field\" \n                        className=\"form-control\"\n                        name='name'\n                        value={name}\n                        onChange={e=>setName(e.target.value)}\n                    />\n                </div>\n\n                <div className=\"form-group\">\n                    <label htmlFor=\"email_field\">Email</label>\n                    <input\n                        type=\"email\"\n                        id=\"email_field\"\n                        className=\"form-control\"\n                        name='email'\n                        value={email}\n                        onChange={e=>setEmail(e.target.value)}\n                    />\n                </div>\n\n                <div className='form-group'>\n                    <label htmlFor='avatar_upload'>Avatar</label>\n                    <div className='d-flex align-items-center'>\n                        <div>\n                            <figure className='avatar mr-3 item-rtl'>\n                                <img\n                                    src={avatarPreview}\n                                    className='rounded-circle'\n                                    alt='Avatar Preview'\n                                />\n                            </figure>\n                        </div>\n                        <div className='custom-file'>\n                            <input\n                                type='file'\n                                name='avatar'\n                                className='custom-file-input'\n                                id='customFile'\n                                onChange={onChangeAvatar}\n                            />\n                            <label className='custom-file-label' htmlFor='customFile'>\n                                Choose Avatar\n                        </label>\n                        </div>\n                    </div>\n                </div>\n\n                <button type=\"submit\" className=\"btn update-btn btn-block mt-4 mb-3\" >Update</button>\n            </form>\n        </div>\n    </div>)\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}