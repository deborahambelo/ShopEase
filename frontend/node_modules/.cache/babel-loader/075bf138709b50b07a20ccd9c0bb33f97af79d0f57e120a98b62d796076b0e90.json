{"ast":null,"code":"import _objectSpread from\"/Users/deborahketema/Downloads/jvlcart-main/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/deborahketema/Downloads/jvlcart-main/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Fragment,useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{getProducts}from\"../../actions/productActions\";import Loader from\".././layouts/Loader\";import MetaData from\".././layouts/MetaData\";import Product from\".././product/Product\";import{toast}from'react-toastify';import Pagination from'react-js-pagination';import{useParams}from\"react-router-dom\";import Slider from\"rc-slider\";import Tooltip from'rc-tooltip';import'rc-slider/assets/index.css';import'rc-tooltip/assets/bootstrap.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProductSearch(){var dispatch=useDispatch();var _useSelector=useSelector(function(state){return state.productsState;}),products=_useSelector.products,loading=_useSelector.loading,error=_useSelector.error,productsCount=_useSelector.productsCount,resPerPage=_useSelector.resPerPage;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),currentPage=_useState2[0],setCurrentPage=_useState2[1];var _useState3=useState([1,1000]),_useState4=_slicedToArray(_useState3,2),price=_useState4[0],setPrice=_useState4[1];var _useState5=useState(price),_useState6=_slicedToArray(_useState5,2),priceChanged=_useState6[0],setPriceChanged=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),category=_useState8[0],setCategory=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),rating=_useState10[0],setRating=_useState10[1];var _useParams=useParams(),keyword=_useParams.keyword;var categories=['Electronics','Mobile Phones','Laptops','Accessories','Headphones','Food','Books','Clothes/Shoes','Beauty/Health','Sports','Outdoor','Home'];var setCurrentPageNo=function setCurrentPageNo(pageNo){setCurrentPage(pageNo);};useEffect(function(){if(error){return toast.error(error,{position:toast.POSITION.BOTTOM_CENTER});}dispatch(getProducts(keyword,priceChanged,category,rating,currentPage));},[error,dispatch,currentPage,keyword,priceChanged,category,rating]);return/*#__PURE__*/_jsx(Fragment,{children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Buy Best Products'}),/*#__PURE__*/_jsx(\"h1\",{id:\"products_heading\",children:\"Search Products\"}),/*#__PURE__*/_jsx(\"section\",{id:\"products\",className:\"container mt-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-6 col-md-3 mb-5 mt-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"px-5\",onMouseUp:function onMouseUp(){return setPriceChanged(price);},children:/*#__PURE__*/_jsx(Slider,{range:true,marks:{1:\"$1\",1000:\"$1000\"},min:1,max:1000,defaultValue:price,onChange:function onChange(price){setPrice(price);},handleRender:function handleRender(renderProps){return/*#__PURE__*/_jsx(Tooltip,{overlay:\"$\".concat(renderProps.props['aria-valuenow']),children:/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({},renderProps.props),{},{children:\"  \"}))});}})}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-3\",children:\"Categories\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"pl-0\",children:categories.map(function(category){return/*#__PURE__*/_jsx(\"li\",{style:{cursor:\"pointer\",listStyleType:\"none\"},onClick:function onClick(){setCategory(category);},children:category},category);})})]}),/*#__PURE__*/_jsx(\"hr\",{className:\"my-5\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-5\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3\",children:\"Ratings\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"pl-0\",children:[5,4,3,2,1].map(function(star){return/*#__PURE__*/_jsx(\"li\",{style:{cursor:\"pointer\",listStyleType:\"none\"},onClick:function onClick(){setRating(star);},children:/*#__PURE__*/_jsx(\"div\",{className:\"rating-outer\",children:/*#__PURE__*/_jsx(\"div\",{className:\"rating-inner\",style:{width:\"\".concat(star*20,\"%\")}})})},star);})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-6 col-md-9\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:products&&products.map(function(product){return/*#__PURE__*/_jsx(Product,{col:4,product:product},product._id);})})})]})}),productsCount>0&&productsCount>resPerPage?/*#__PURE__*/_jsx(\"div\",{className:\"d-flex justify-content-center mt-5\",children:/*#__PURE__*/_jsx(Pagination,{activePage:currentPage,onChange:setCurrentPageNo,totalItemsCount:productsCount,itemsCountPerPage:resPerPage,nextPageText:'Next',firstPageText:'First',lastPageText:'Last',itemClass:'page-item',linkClass:'page-link'})}):null]})});}","map":{"version":3,"names":["Fragment","useEffect","useState","useDispatch","useSelector","getProducts","Loader","MetaData","Product","toast","Pagination","useParams","Slider","Tooltip","ProductSearch","dispatch","state","productsState","products","loading","error","productsCount","resPerPage","currentPage","setCurrentPage","price","setPrice","priceChanged","setPriceChanged","category","setCategory","rating","setRating","keyword","categories","setCurrentPageNo","pageNo","position","POSITION","BOTTOM_CENTER","renderProps","props","map","cursor","listStyleType","star","width","product","_id"],"sources":["/Users/deborahketema/Downloads/jvlcart-main/frontend/src/components/product/ProductSearch.js"],"sourcesContent":["import { Fragment, useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { getProducts } from \"../../actions/productActions\";\nimport Loader from \".././layouts/Loader\";\nimport MetaData from \".././layouts/MetaData\";\nimport Product from \".././product/Product\";\nimport  {toast} from 'react-toastify';\nimport Pagination from 'react-js-pagination';\nimport { useParams } from \"react-router-dom\";\nimport Slider from \"rc-slider\";\nimport Tooltip from 'rc-tooltip';\nimport 'rc-slider/assets/index.css';\nimport 'rc-tooltip/assets/bootstrap.css';\n\nexport  default function ProductSearch(){\n    const dispatch = useDispatch();\n    const {products, loading, error, productsCount, resPerPage} =    useSelector((state) => state.productsState)\n    const [currentPage, setCurrentPage] = useState(1);\n    const [price, setPrice] = useState([1,1000]);\n    const [priceChanged, setPriceChanged] = useState(price);\n    const [category, setCategory] = useState(null);\n    const [rating, setRating] = useState(0);\n\n    const { keyword } = useParams();\n    const categories = [  \n        'Electronics',\n        'Mobile Phones',\n        'Laptops',\n        'Accessories',\n        'Headphones',\n        'Food',\n        'Books',\n        'Clothes/Shoes',\n        'Beauty/Health',\n        'Sports',\n        'Outdoor',\n        'Home'\n    ];\n \n    const setCurrentPageNo = (pageNo) =>{\n\n        setCurrentPage(pageNo)\n       \n    }\n\n    useEffect(()=>{\n        if(error) {\n            return toast.error(error,{\n                position: toast.POSITION.BOTTOM_CENTER\n            })\n        }\n        dispatch(getProducts(keyword, priceChanged, category, rating, currentPage)) \n    }, [error, dispatch, currentPage, keyword, priceChanged, category, rating])\n\n\n    return (\n        <Fragment>\n            {loading ? <Loader/>:\n                <Fragment>\n                    <MetaData title={'Buy Best Products'} />\n                    <h1 id=\"products_heading\">Search Products</h1>\n                    <section id=\"products\" className=\"container mt-5\">\n                        <div className=\"row\">\n                            <div className=\"col-6 col-md-3 mb-5 mt-5\">\n                                {/* Price Filter */}\n                                <div className=\"px-5\" onMouseUp={()=>setPriceChanged(price)}>\n                                    <Slider\n                                        range={true}\n                                        marks = {\n                                             {\n                                                1: \"$1\",\n                                                1000: \"$1000\"\n                                             }   \n                                        }\n                                        min={1}\n                                        max={1000}\n                                        defaultValue={price}\n                                        onChange={(price)=>{\n                                            setPrice(price)\n                                        }}\n                                        handleRender={\n                                            renderProps => {\n                                                return (\n                                                    <Tooltip  overlay={`$${renderProps.props['aria-valuenow']}`}  >\n                                                         <div {...renderProps.props}>  </div>\n                                                    </Tooltip>\n                                                )\n                                            }\n                                        }\n                                    />\n                                </div>\n                                <hr className=\"my-5\" />        \n                                {/* Category Filter */}\n                                <div className=\"mt-5\">\n                                     <h3 className=\"mb-3\">Categories</h3> \n                                       <ul className=\"pl-0\">\n                                        {categories.map(category =>\n                                             <li\n                                             style={{\n                                                 cursor:\"pointer\",\n                                                 listStyleType: \"none\"\n                                             }}\n                                             key={category}\n                                             onClick={()=>{\n                                                setCategory(category)\n                                             }}\n                                             >\n                                                 {category}\n                                             </li>\n                                            \n                                            )}\n                                           \n                                       </ul>\n                                </div>\n                                <hr className=\"my-5\" /> \n                                {/* Ratings Filter */}\n                                <div className=\"mt-5\">\n                                    <h4 className=\"mb-3\">Ratings</h4>\n                                    <ul className=\"pl-0\">\n                                        {[5, 4, 3, 2, 1].map(star =>\n                                             <li\n                                             style={{\n                                                 cursor:\"pointer\",\n                                                 listStyleType: \"none\"\n                                             }}\n                                             key={star}\n                                             onClick={()=>{\n                                                setRating(star)\n                                             }}\n                                             >\n                                               <div className=\"rating-outer\">\n                                                    <div \n                                                    className=\"rating-inner\"\n                                                    style={{\n                                                        width: `${star * 20}%`\n                                                    }}\n                                                    > \n\n                                                    </div>\n                                               </div>\n                                             </li>\n                                            \n                                            )}\n                                           \n                                       </ul>\n                                </div>\n                            </div>\n                            <div className=\"col-6 col-md-9\">\n                                <div className=\"row\">\n                                    { products && products.map(product => (\n                                        <Product col={4} key={product._id}  product={product}/>\n                                    ))}\n                                </div>\n\n                            </div>\n                        </div>\n                    </section>\n                    {productsCount > 0 && productsCount > resPerPage?\n                    <div className=\"d-flex justify-content-center mt-5\">\n                           <Pagination \n                                activePage={currentPage}\n                                onChange={setCurrentPageNo}\n                                totalItemsCount={productsCount}\n                                itemsCountPerPage={resPerPage}\n                                nextPageText={'Next'}\n                                firstPageText={'First'}\n                                lastPageText={'Last'}\n                                itemClass={'page-item'}\n                                linkClass={'page-link'}\n                           />     \n                    </div> : null }\n                </Fragment>\n           }\n        </Fragment>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}