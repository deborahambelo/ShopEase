{"ast":null,"code":"import _slicedToArray from\"/Users/deborahketema/Downloads/ShopEase/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Fragment,useEffect,useState}from\"react\";import{Button}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{deleteReview,getReviews}from\"../../actions/productActions\";import{clearError,clearReviewDeleted}from\"../../slices/productSlice\";import Loader from'../layouts/Loader';import{MDBDataTable}from'mdbreact';import{toast}from'react-toastify';import Sidebar from\"./Sidebar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ReviewList(){var _useSelector=useSelector(function(state){return state.productState;}),_useSelector$reviews=_useSelector.reviews,reviews=_useSelector$reviews===void 0?[]:_useSelector$reviews,_useSelector$loading=_useSelector.loading,loading=_useSelector$loading===void 0?true:_useSelector$loading,error=_useSelector.error,isReviewDeleted=_useSelector.isReviewDeleted;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),productId=_useState2[0],setProductId=_useState2[1];var dispatch=useDispatch();var setReviews=function setReviews(){var data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Rating',field:'rating',sort:'asc'},{label:'User',field:'user',sort:'asc'},{label:'Comment',field:'comment',sort:'asc'},{label:'Actions',field:'actions',sort:'asc'}],rows:[]};reviews.forEach(function(review){data.rows.push({id:review._id,rating:review.rating,user:review.user.name,comment:review.comment,actions:/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){return deleteHandler(e,review._id);},className:\"btn btn-danger py-1 px-2 ml-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})})});});return data;};var deleteHandler=function deleteHandler(e,id){e.target.disabled=true;dispatch(deleteReview(productId,id));};var submitHandler=function submitHandler(e){e.preventDefault();dispatch(getReviews(productId));};useEffect(function(){if(error){toast(error,{position:toast.POSITION.BOTTOM_CENTER,type:'error',onOpen:function onOpen(){dispatch(clearError());}});return;}if(isReviewDeleted){toast('Review Deleted Succesfully!',{type:'success',position:toast.POSITION.BOTTOM_CENTER,onOpen:function onOpen(){return dispatch(clearReviewDeleted());}});dispatch(getReviews(productId));return;}},[dispatch,error,isReviewDeleted]);return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-4\",children:\"Review List\"}),/*#__PURE__*/_jsx(\"div\",{className:\"row justify-content-center mt-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Product ID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",onChange:function onChange(e){return setProductId(e.target.value);},value:productId,className:\"form-control\"})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"btn btn-primary btn-block py-2\",children:\"Search\"})]})})}),/*#__PURE__*/_jsx(Fragment,{children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setReviews(),bordered:true,striped:true,hover:true,className:\"px-3\"})})]})]});}","map":{"version":3,"names":["Fragment","useEffect","useState","Button","useDispatch","useSelector","deleteReview","getReviews","clearError","clearReviewDeleted","Loader","MDBDataTable","toast","Sidebar","ReviewList","state","productState","reviews","loading","error","isReviewDeleted","productId","setProductId","dispatch","setReviews","data","columns","label","field","sort","rows","forEach","review","push","id","_id","rating","user","name","comment","actions","e","deleteHandler","target","disabled","submitHandler","preventDefault","position","POSITION","BOTTOM_CENTER","type","onOpen","value"],"sources":["/Users/deborahketema/Downloads/ShopEase/frontend/src/components/admin/ReviewList.js"],"sourcesContent":["import { Fragment, useEffect, useState } from \"react\"\nimport { Button } from \"react-bootstrap\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { deleteReview, getReviews } from \"../../actions/productActions\"\nimport { clearError, clearReviewDeleted } from \"../../slices/productSlice\"\nimport Loader from '../layouts/Loader';\nimport { MDBDataTable} from 'mdbreact';\nimport {toast } from 'react-toastify'\nimport Sidebar from \"./Sidebar\"\n\nexport default function ReviewList() {\n    const { reviews = [], loading = true, error, isReviewDeleted }  = useSelector(state => state.productState)\n    const [productId, setProductId] = useState(\"\");\n    const dispatch = useDispatch();\n\n    const setReviews = () => {\n        const data = {\n            columns : [\n                {\n                    label: 'ID',\n                    field: 'id',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Rating',\n                    field: 'rating',\n                    sort: 'asc'\n                },\n                {\n                    label: 'User',\n                    field: 'user',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Comment',\n                    field: 'comment',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Actions',\n                    field: 'actions',\n                    sort: 'asc'\n                }\n            ],\n            rows : []\n        }\n\n        reviews.forEach( review => {\n            data.rows.push({\n                id: review._id,\n                rating: review.rating,\n                user : review.user.name,\n                comment: review.comment ,\n                actions: (\n                    <Fragment>\n                        <Button onClick={e => deleteHandler(e, review._id)} className=\"btn btn-danger py-1 px-2 ml-2\">\n                            <i className=\"fa fa-trash\"></i>\n                        </Button>\n                    </Fragment>\n                )\n            })\n        })\n\n        return data;\n    }\n\n    const deleteHandler = (e, id) => {\n        e.target.disabled = true;\n        dispatch(deleteReview(productId, id))\n    }\n\n    const submitHandler = (e) =>{\n        e.preventDefault();\n        dispatch(getReviews(productId))\n    }\n\n    useEffect(() => {\n        if(error) {\n            toast(error, {\n                position: toast.POSITION.BOTTOM_CENTER,\n                type: 'error',\n                onOpen: ()=> { dispatch(clearError()) }\n            })\n            return\n        }\n        if(isReviewDeleted) {\n            toast('Review Deleted Succesfully!',{\n                type: 'success',\n                position: toast.POSITION.BOTTOM_CENTER,\n                onOpen: () => dispatch(clearReviewDeleted())\n            })\n            dispatch(getReviews(productId))\n            return;\n        }\n\n       \n    },[dispatch, error, isReviewDeleted])\n\n\n    return (\n        <div className=\"row\">\n        <div className=\"col-12 col-md-2\">\n                <Sidebar/>\n        </div>\n        <div className=\"col-12 col-md-10\">\n            <h1 className=\"my-4\">Review List</h1>\n            <div className=\"row justify-content-center mt-5\">\n                <div className=\"col-5\">\n                    <form onSubmit={submitHandler}>\n                        <div className=\"form-group\">\n                            <label >Product ID</label>\n                            <input \n                                type=\"text\"\n                                onChange= {e => setProductId(e.target.value)}\n                                value={productId}\n                                className=\"form-control\"\n                            />\n                        </div>\n                        <button type=\"submit\" disabled={loading} className=\"btn btn-primary btn-block py-2\">\n                            Search\n                        </button>\n                    </form>\n                </div>\n            </div>\n            <Fragment>\n                {loading ? <Loader/> : \n                    <MDBDataTable\n                        data={setReviews()}\n                        bordered\n                        striped\n                        hover\n                        className=\"px-3\"\n                    />\n                }\n            </Fragment>\n        </div>\n    </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}