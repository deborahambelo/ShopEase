{"ast":null,"code":"import _slicedToArray from\"/Users/deborahketema/Downloads/ShopEase/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Fragment,useEffect,useState}from\"react\";import Sidebar from\"./Sidebar\";import{useDispatch,useSelector}from'react-redux';import{useNavigate,useParams}from\"react-router-dom\";import{getUser,updateUser}from\"../../actions/userActions\";import{clearError,clearUserUpdated}from\"../../slices/userSlice\";import{toast}from\"react-toastify\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UpdateUser(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),name=_useState2[0],setName=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),role=_useState6[0],setRole=_useState6[1];var _useParams=useParams(),userId=_useParams.id;var _useSelector=useSelector(function(state){return state.userState;}),loading=_useSelector.loading,isUserUpdated=_useSelector.isUserUpdated,error=_useSelector.error,user=_useSelector.user;var _useSelector2=useSelector(function(state){return state.authState;}),authUser=_useSelector2.user;var dispatch=useDispatch();var submitHandler=function submitHandler(e){e.preventDefault();var formData=new FormData();formData.append('name',name);formData.append('email',email);formData.append('role',role);dispatch(updateUser(userId,formData));};useEffect(function(){if(isUserUpdated){toast('User Updated Succesfully!',{type:'success',position:toast.POSITION.BOTTOM_CENTER,onOpen:function onOpen(){return dispatch(clearUserUpdated());}});return;}if(error){toast(error,{position:toast.POSITION.BOTTOM_CENTER,type:'error',onOpen:function onOpen(){dispatch(clearError());}});return;}dispatch(getUser(userId));},[isUserUpdated,error,dispatch]);useEffect(function(){if(user._id){setName(user.name);setEmail(user.email);setRole(user.role);}},[user]);return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsx(\"div\",{className:\"wrapper my-5\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,className:\"shadow-lg\",encType:\"multipart/form-data\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"mb-4\",children:\"Update User\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"name_field\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"name_field\",className:\"form-control\",onChange:function onChange(e){return setName(e.target.value);},value:name})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"price_field\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"price_field\",className:\"form-control\",onChange:function onChange(e){return setEmail(e.target.value);},value:email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"category_field\",children:\"Role\"}),/*#__PURE__*/_jsxs(\"select\",{disabled:user._id===authUser._id,value:role,onChange:function onChange(e){return setRole(e.target.value);},className:\"form-control\",id:\"category_field\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"admin\",children:\"Admin\"}),/*#__PURE__*/_jsx(\"option\",{value:\"user\",children:\"User\"})]})]}),/*#__PURE__*/_jsx(\"button\",{id:\"login_button\",type:\"submit\",disabled:loading,className:\"btn btn-block py-3\",children:\"UPDATE\"})]})})})})]});}","map":{"version":3,"names":["Fragment","useEffect","useState","Sidebar","useDispatch","useSelector","useNavigate","useParams","getUser","updateUser","clearError","clearUserUpdated","toast","UpdateUser","name","setName","email","setEmail","role","setRole","userId","id","state","userState","loading","isUserUpdated","error","user","authState","authUser","dispatch","submitHandler","e","preventDefault","formData","FormData","append","type","position","POSITION","BOTTOM_CENTER","onOpen","_id","target","value"],"sources":["/Users/deborahketema/Downloads/ShopEase/frontend/src/components/admin/UpdateUser.js"],"sourcesContent":["import { Fragment, useEffect, useState } from \"react\";\nimport Sidebar from \"./Sidebar\";\nimport { useDispatch, useSelector} from 'react-redux';\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { getUser, updateUser } from \"../../actions/userActions\";\nimport { clearError, clearUserUpdated } from \"../../slices/userSlice\";\nimport { toast } from \"react-toastify\";\n\nexport default function UpdateUser () {\n    const [name, setName] = useState(\"\");\n    const [email, setEmail] = useState(\"\");\n    const [role, setRole] = useState(\"\");\n   \n    const { id:userId } = useParams();\n    \n    const { loading, isUserUpdated, error, user } = useSelector( state => state.userState)\n    const {  user:authUser } = useSelector( state => state.authState)\n\n    const dispatch = useDispatch();\n\n    const submitHandler = (e) => {\n        e.preventDefault();\n        const formData = new FormData();\n        formData.append('name' , name);\n        formData.append('email' , email);\n        formData.append('role' , role);\n        dispatch(updateUser(userId, formData))\n    }\n\n    useEffect(() => {\n        if(isUserUpdated) {\n            toast('User Updated Succesfully!',{\n                type: 'success',\n                position: toast.POSITION.BOTTOM_CENTER,\n                onOpen: () => dispatch(clearUserUpdated())\n            })\n            return;\n        }\n\n        if(error)  {\n            toast(error, {\n                position: toast.POSITION.BOTTOM_CENTER,\n                type: 'error',\n                onOpen: ()=> { dispatch(clearError()) }\n            })\n            return\n        }\n\n        dispatch(getUser(userId))\n    }, [isUserUpdated, error, dispatch])\n\n\n    useEffect(() => {\n        if(user._id) {\n            setName(user.name);\n            setEmail(user.email);\n            setRole(user.role);\n        }\n    },[user])\n\n\n    return (\n        <div className=\"row\">\n            <div className=\"col-12 col-md-2\">\n                    <Sidebar/>\n            </div>\n            <div className=\"col-12 col-md-10\">\n                <Fragment>\n                    <div className=\"wrapper my-5\"> \n                        <form onSubmit={submitHandler} className=\"shadow-lg\" encType='multipart/form-data'>\n                            <h1 className=\"mb-4\">Update User</h1>\n\n                            <div className=\"form-group\">\n                            <label htmlFor=\"name_field\">Name</label>\n                            <input\n                                type=\"text\"\n                                id=\"name_field\"\n                                className=\"form-control\"\n                                onChange={e => setName(e.target.value)}\n                                value={name}\n                            />\n                            </div>\n\n                            <div className=\"form-group\">\n                                <label htmlFor=\"price_field\">Email</label>\n                                <input\n                                type=\"text\"\n                                id=\"price_field\"\n                                className=\"form-control\"\n                                onChange={e => setEmail(e.target.value)}\n                                value={email}\n                                />\n                            </div>\n                            <div className=\"form-group\">\n                                <label htmlFor=\"category_field\">Role</label>\n                                <select disabled={user._id === authUser._id } value={role} onChange={e => setRole(e.target.value)} className=\"form-control\" id=\"category_field\">\n                                    <option value=\"admin\">Admin</option>\n                                    <option value=\"user\">User</option>\n                                </select>\n                            </div>\n                            <button\n                            id=\"login_button\"\n                            type=\"submit\"\n                            disabled={loading}\n                            className=\"btn btn-block py-3\"\n                            >\n                            UPDATE\n                            </button>\n\n                        </form>\n                    </div>\n                </Fragment>\n            </div>\n        </div>\n        \n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}