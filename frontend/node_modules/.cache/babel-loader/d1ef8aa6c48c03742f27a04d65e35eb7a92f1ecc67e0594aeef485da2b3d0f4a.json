{"ast":null,"code":"import{Fragment,useEffect}from\"react\";import{Button}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{deleteUser,getUsers}from\"../../actions/userActions\";import{clearError,clearUserDeleted}from\"../../slices/userSlice\";import Loader from'../layouts/Loader';import{MDBDataTable}from'mdbreact';import{toast}from'react-toastify';import Sidebar from\"./Sidebar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UserList(){var _useSelector=useSelector(function(state){return state.userState;}),_useSelector$users=_useSelector.users,users=_useSelector$users===void 0?[]:_useSelector$users,_useSelector$loading=_useSelector.loading,loading=_useSelector$loading===void 0?true:_useSelector$loading,error=_useSelector.error,isUserDeleted=_useSelector.isUserDeleted;var dispatch=useDispatch();var setUsers=function setUsers(){var data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Name',field:'name',sort:'asc'},{label:'Email',field:'email',sort:'asc'},{label:'Role',field:'role',sort:'asc'},{label:'Actions',field:'actions',sort:'asc'}],rows:[]};users.forEach(function(user){data.rows.push({id:user._id,name:user.name,email:user.email,role:user.role,actions:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(Link,{to:\"/admin/user/\".concat(user._id),className:\"btn btn-primary\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})]}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){return deleteHandler(e,user._id);},className:\"btn btn-danger py-1 px-2 ml-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})]})});});return data;};var deleteHandler=function deleteHandler(e,id){e.target.disabled=true;dispatch(deleteUser(id));};useEffect(function(){if(error){toast(error,{position:toast.POSITION.BOTTOM_CENTER,type:'error',onOpen:function onOpen(){dispatch(clearError());}});return;}if(isUserDeleted){toast('User Deleted Succesfully!',{type:'success',position:toast.POSITION.BOTTOM_CENTER,onOpen:function onOpen(){return dispatch(clearUserDeleted());}});return;}dispatch(getUsers);},[dispatch,error,isUserDeleted]);return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-4\",children:\"User List\"}),/*#__PURE__*/_jsx(Fragment,{children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setUsers(),bordered:true,striped:true,hover:true,className:\"px-3\"})})]})]});}","map":{"version":3,"names":["Fragment","useEffect","Button","useDispatch","useSelector","Link","deleteUser","getUsers","clearError","clearUserDeleted","Loader","MDBDataTable","toast","Sidebar","UserList","state","userState","users","loading","error","isUserDeleted","dispatch","setUsers","data","columns","label","field","sort","rows","forEach","user","push","id","_id","name","email","role","actions","e","deleteHandler","target","disabled","position","POSITION","BOTTOM_CENTER","type","onOpen"],"sources":["/Users/deborahketema/Downloads/ShopEase/frontend/src/components/admin/UserList.js"],"sourcesContent":["import { Fragment, useEffect } from \"react\"\nimport { Button } from \"react-bootstrap\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { Link } from \"react-router-dom\"\nimport { deleteUser, getUsers } from \"../../actions/userActions\"\nimport { clearError, clearUserDeleted } from \"../../slices/userSlice\"\nimport Loader from '../layouts/Loader';\nimport { MDBDataTable} from 'mdbreact';\nimport {toast } from 'react-toastify'\nimport Sidebar from \"./Sidebar\"\n\nexport default function UserList() {\n    const { users = [], loading = true, error, isUserDeleted }  = useSelector(state => state.userState)\n\n    const dispatch = useDispatch();\n\n    const setUsers = () => {\n        const data = {\n            columns : [\n                {\n                    label: 'ID',\n                    field: 'id',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Name',\n                    field: 'name',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Email',\n                    field: 'email',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Role',\n                    field: 'role',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Actions',\n                    field: 'actions',\n                    sort: 'asc'\n                }\n            ],\n            rows : []\n        }\n\n        users.forEach( user => {\n            data.rows.push({\n                id: user._id,\n                name: user.name,\n                email : user.email,\n                role: user.role ,\n                actions: (\n                    <Fragment>\n                        <Link to={`/admin/user/${user._id}`} className=\"btn btn-primary\"> <i className=\"fa fa-pencil\"></i></Link>\n                        <Button onClick={e => deleteHandler(e, user._id)} className=\"btn btn-danger py-1 px-2 ml-2\">\n                            <i className=\"fa fa-trash\"></i>\n                        </Button>\n                    </Fragment>\n                )\n            })\n        })\n\n        return data;\n    }\n\n    const deleteHandler = (e, id) => {\n        e.target.disabled = true;\n        dispatch(deleteUser(id))\n    }\n\n    useEffect(() => {\n        if(error) {\n            toast(error, {\n                position: toast.POSITION.BOTTOM_CENTER,\n                type: 'error',\n                onOpen: ()=> { dispatch(clearError()) }\n            })\n            return\n        }\n        if(isUserDeleted) {\n            toast('User Deleted Succesfully!',{\n                type: 'success',\n                position: toast.POSITION.BOTTOM_CENTER,\n                onOpen: () => dispatch(clearUserDeleted())\n            })\n            return;\n        }\n\n        dispatch(getUsers)\n    },[dispatch, error, isUserDeleted])\n\n\n    return (\n        <div className=\"row\">\n        <div className=\"col-12 col-md-2\">\n                <Sidebar/>\n        </div>\n        <div className=\"col-12 col-md-10\">\n            <h1 className=\"my-4\">User List</h1>\n            <Fragment>\n                {loading ? <Loader/> : \n                    <MDBDataTable\n                        data={setUsers()}\n                        bordered\n                        striped\n                        hover\n                        className=\"px-3\"\n                    />\n                }\n            </Fragment>\n        </div>\n    </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}