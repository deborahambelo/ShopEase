{"ast":null,"code":"import _slicedToArray from\"/Users/deborahketema/Downloads/ShopEase/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{Fragment,useEffect,useState}from\"react\";import Sidebar from\"./Sidebar\";import{useDispatch,useSelector}from'react-redux';import{useNavigate,useParams}from\"react-router-dom\";import{orderDetail as orderDetailAction,updateOrder}from\"../../actions/orderActions\";import{toast}from\"react-toastify\";import{clearOrderUpdated,clearError}from\"../../slices/orderSlice\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UpdateOrder(){var _useSelector=useSelector(function(state){return state.orderState;}),loading=_useSelector.loading,isOrderUpdated=_useSelector.isOrderUpdated,error=_useSelector.error,orderDetail=_useSelector.orderDetail;var _orderDetail$user=orderDetail.user,user=_orderDetail$user===void 0?{}:_orderDetail$user,_orderDetail$orderIte=orderDetail.orderItems,orderItems=_orderDetail$orderIte===void 0?[]:_orderDetail$orderIte,_orderDetail$shipping=orderDetail.shippingInfo,shippingInfo=_orderDetail$shipping===void 0?{}:_orderDetail$shipping,_orderDetail$totalPri=orderDetail.totalPrice,totalPrice=_orderDetail$totalPri===void 0?0:_orderDetail$totalPri,_orderDetail$paymentI=orderDetail.paymentInfo,paymentInfo=_orderDetail$paymentI===void 0?{}:_orderDetail$paymentI;var isPaid=paymentInfo.status==='succeeded'?true:false;var _useState=useState(\"Processing\"),_useState2=_slicedToArray(_useState,2),orderStatus=_useState2[0],setOrderStatus=_useState2[1];var _useParams=useParams(),orderId=_useParams.id;var navigate=useNavigate();var dispatch=useDispatch();var submitHandler=function submitHandler(e){e.preventDefault();var orderData={};orderData.orderStatus=orderStatus;dispatch(updateOrder(orderId,orderData));};useEffect(function(){if(isOrderUpdated){toast('Order Updated Succesfully!',{type:'success',position:toast.POSITION.BOTTOM_CENTER,onOpen:function onOpen(){return dispatch(clearOrderUpdated());}});return;}if(error){toast(error,{position:toast.POSITION.BOTTOM_CENTER,type:'error',onOpen:function onOpen(){dispatch(clearError());}});return;}dispatch(orderDetailAction(orderId));},[isOrderUpdated,error,dispatch]);useEffect(function(){if(orderDetail._id){setOrderStatus(orderDetail.orderStatus);}},[orderDetail]);return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-10\",children:/*#__PURE__*/_jsx(Fragment,{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row d-flex justify-content-around\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-lg-8 mt-5 order-details\",children:[/*#__PURE__*/_jsxs(\"h1\",{className:\"my-5\",children:[\"Order # \",orderDetail._id]}),/*#__PURE__*/_jsx(\"h4\",{className:\"mb-4\",children:\"Shipping Info\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Name:\"}),\" \",user.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Phone:\"}),\" \",shippingInfo.phoneNo]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Address:\"}),shippingInfo.address,\", \",shippingInfo.city,\", \",shippingInfo.postalCode,\", \",shippingInfo.state,\", \",shippingInfo.country]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Amount:\"}),\" $\",totalPrice]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"my-4\",children:\"Payment\"}),/*#__PURE__*/_jsx(\"p\",{className:isPaid?'greenColor':'redColor',children:/*#__PURE__*/_jsx(\"b\",{children:isPaid?'PAID':'NOT PAID'})}),/*#__PURE__*/_jsx(\"h4\",{className:\"my-4\",children:\"Order Status:\"}),/*#__PURE__*/_jsx(\"p\",{className:orderStatus&&orderStatus.includes('Delivered')?'greenColor':'redColor',children:/*#__PURE__*/_jsx(\"b\",{children:orderStatus})}),/*#__PURE__*/_jsx(\"h4\",{className:\"my-4\",children:\"Order Items:\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"cart-item my-1\",children:orderItems&&orderItems.map(function(item){return/*#__PURE__*/_jsxs(\"div\",{className:\"row my-5\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-2\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,height:\"45\",width:\"65\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-5 col-lg-5\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-2 mt-4 mt-lg-0\",children:/*#__PURE__*/_jsxs(\"p\",{children:[\"$\",item.price]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-3 mt-4 mt-lg-0\",children:/*#__PURE__*/_jsxs(\"p\",{children:[item.quantity,\" Piece(s)\"]})})]});})}),/*#__PURE__*/_jsx(\"hr\",{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-lg-3 mt-5\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"my-4\",children:\"Order Status\"}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group\",children:/*#__PURE__*/_jsxs(\"select\",{className:\"form-control\",onChange:function onChange(e){return setOrderStatus(e.target.value);},value:orderStatus,name:\"status\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Processing\",children:\"Processing\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Shipped\",children:\"Shipped\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Delivered\",children:\"Delivered\"})]})}),/*#__PURE__*/_jsx(\"button\",{disabled:loading,onClick:submitHandler,className:\"btn btn-primary btn-block\",children:\"Update Status\"})]})]})})})]});}","map":{"version":3,"names":["Fragment","useEffect","useState","Sidebar","useDispatch","useSelector","useNavigate","useParams","orderDetail","orderDetailAction","updateOrder","toast","clearOrderUpdated","clearError","Link","UpdateOrder","state","orderState","loading","isOrderUpdated","error","user","orderItems","shippingInfo","totalPrice","paymentInfo","isPaid","status","orderStatus","setOrderStatus","orderId","id","navigate","dispatch","submitHandler","e","preventDefault","orderData","type","position","POSITION","BOTTOM_CENTER","onOpen","_id","name","phoneNo","address","city","postalCode","country","includes","map","item","image","product","price","quantity","target","value"],"sources":["/Users/deborahketema/Downloads/ShopEase/frontend/src/components/admin/UpdateOrder.js"],"sourcesContent":["import { Fragment, useEffect, useState } from \"react\";\nimport Sidebar from \"./Sidebar\";\nimport { useDispatch, useSelector} from 'react-redux';\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { orderDetail as orderDetailAction, updateOrder } from \"../../actions/orderActions\";\nimport { toast } from \"react-toastify\";\nimport { clearOrderUpdated, clearError } from \"../../slices/orderSlice\";\nimport { Link } from \"react-router-dom\";\n\nexport default function UpdateOrder () {\n    \n    \n    const { loading, isOrderUpdated, error, orderDetail } = useSelector( state => state.orderState)\n    const { user = {}, orderItems = [], shippingInfo = {}, totalPrice = 0, paymentInfo = {}} = orderDetail;\n    const isPaid = paymentInfo.status === 'succeeded'? true: false;\n    const [orderStatus, setOrderStatus] = useState(\"Processing\");\n    const { id:orderId } = useParams();\n\n\n    const navigate = useNavigate();\n    const dispatch = useDispatch();\n\n    const submitHandler = (e) => {\n        e.preventDefault();\n        const orderData = {};\n        orderData.orderStatus = orderStatus;\n        dispatch(updateOrder(orderId, orderData))\n    }\n    \n    useEffect(() => {\n        if(isOrderUpdated) {\n            toast('Order Updated Succesfully!',{\n                type: 'success',\n                position: toast.POSITION.BOTTOM_CENTER,\n                onOpen: () => dispatch(clearOrderUpdated())\n            })\n           \n            return;\n        }\n\n        if(error)  {\n            toast(error, {\n                position: toast.POSITION.BOTTOM_CENTER,\n                type: 'error',\n                onOpen: ()=> { dispatch(clearError()) }\n            })\n            return\n        }\n\n        dispatch(orderDetailAction(orderId))\n    }, [isOrderUpdated, error, dispatch])\n\n\n    useEffect(() => {\n        if(orderDetail._id) {\n            setOrderStatus(orderDetail.orderStatus);\n        }\n    },[orderDetail])\n\n\n    return (\n        <div className=\"row\">\n            <div className=\"col-12 col-md-2\">\n                    <Sidebar/>\n            </div>\n            <div className=\"col-12 col-md-10\">\n                <Fragment>\n                <div className=\"row d-flex justify-content-around\">\n                        <div className=\"col-12 col-lg-8 mt-5 order-details\">\n    \n                            <h1 className=\"my-5\">Order # {orderDetail._id}</h1>\n    \n                            <h4 className=\"mb-4\">Shipping Info</h4>\n                            <p><b>Name:</b> {user.name}</p>\n                            <p><b>Phone:</b> {shippingInfo.phoneNo}</p>\n                            <p className=\"mb-4\"><b>Address:</b>{shippingInfo.address}, {shippingInfo.city}, {shippingInfo.postalCode}, {shippingInfo.state}, {shippingInfo.country}</p>\n                            <p><b>Amount:</b> ${totalPrice}</p>\n    \n                            <hr />\n    \n                            <h4 className=\"my-4\">Payment</h4>\n                            <p className={isPaid ? 'greenColor' : 'redColor' } ><b>{isPaid ? 'PAID' : 'NOT PAID' }</b></p>\n    \n    \n                            <h4 className=\"my-4\">Order Status:</h4>\n                            <p className={orderStatus&&orderStatus.includes('Delivered') ? 'greenColor' : 'redColor' } ><b>{orderStatus}</b></p>\n    \n    \n                            <h4 className=\"my-4\">Order Items:</h4>\n    \n                            <hr />\n                            <div className=\"cart-item my-1\">\n                                {orderItems && orderItems.map(item => (\n                                    <div className=\"row my-5\">\n                                        <div className=\"col-4 col-lg-2\">\n                                            <img src={item.image} alt={item.name} height=\"45\" width=\"65\" />\n                                        </div>\n\n                                        <div className=\"col-5 col-lg-5\">\n                                            <Link to={`/product/${item.product}`}>{item.name}</Link>\n                                        </div>\n\n\n                                        <div className=\"col-4 col-lg-2 mt-4 mt-lg-0\">\n                                            <p>${item.price}</p>\n                                        </div>\n\n                                        <div className=\"col-4 col-lg-3 mt-4 mt-lg-0\">\n                                            <p>{item.quantity} Piece(s)</p>\n                                        </div>\n                                    </div>\n                                ))}\n                                    \n                            </div>\n                            <hr />\n                        </div>\n                        <div className=\"col-12 col-lg-3 mt-5\">\n                            <h4 className=\"my-4\">Order Status</h4>\n                            <div className=\"form-group\">\n                                <select \n                                className=\"form-control\"\n                                onChange={e => setOrderStatus(e.target.value)}\n                                value={orderStatus}\n                                name=\"status\"\n                                >\n                                    <option value=\"Processing\">Processing</option>\n                                    <option value=\"Shipped\">Shipped</option>\n                                    <option value=\"Delivered\">Delivered</option>\n                                </select>\n                              \n                            </div>\n                            <button\n                                disabled={loading}\n                                onClick={submitHandler}\n                                className=\"btn btn-primary btn-block\"\n                                >\n                                    Update Status\n                            </button>\n\n                        </div>\n                    </div>\n                </Fragment>\n            </div>\n        </div>\n        \n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}