{"ast":null,"code":"import MetaData from'../layouts/MetaData';import{Fragment,useEffect}from'react';import{validateShipping}from'./Shipping';import{useSelector}from'react-redux';import{Link,useNavigate}from'react-router-dom';import CheckoutSteps from'./CheckoutStep';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ConfirmOrder(){var _useSelector=useSelector(function(state){return state.cartState;}),shippingInfo=_useSelector.shippingInfo,cartItems=_useSelector.items;var _useSelector2=useSelector(function(state){return state.authState;}),user=_useSelector2.user;var navigate=useNavigate();var itemsPrice=cartItems.reduce(function(acc,item){return acc+item.price*item.quantity;},0);var shippingPrice=itemsPrice>200?0:25;var taxPrice=Number(0.05*itemsPrice);var totalPrice=Number(itemsPrice+shippingPrice+taxPrice).toFixed(2);taxPrice=Number(taxPrice).toFixed(2);var processPayment=function processPayment(){var data={itemsPrice:itemsPrice,shippingPrice:shippingPrice,taxPrice:taxPrice,totalPrice:totalPrice};sessionStorage.setItem('orderInfo',JSON.stringify(data));navigate('/payment');};useEffect(function(){validateShipping(shippingInfo,navigate);},[]);return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(MetaData,{title:'Confirm Order'}),/*#__PURE__*/_jsx(CheckoutSteps,{shipping:true,confirmOrder:true}),/*#__PURE__*/_jsxs(\"div\",{className:\"row d-flex justify-content-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-lg-8 mt-5 order-confirm\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"mb-3\",children:\"Shipping Info\"}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Name:\"}),\" \",user.name]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"b\",{children:\"Phone:\"}),\" \",shippingInfo.phoneNo]}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"b\",{children:\"Address:\"}),\" \",shippingInfo.address,\", \",shippingInfo.city,\", \",shippingInfo.postalCode,\", \",shippingInfo.state,\", \",shippingInfo.country,\" \"]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{className:\"mt-4\",children:\"Your Cart Items:\"}),cartItems.map(function(item){return/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"cart-item my-1\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-2\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,height:\"45\",width:\"65\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-5 col-lg-6\",children:/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.product),children:item.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-4 col-lg-4 mt-4 mt-lg-0\",children:/*#__PURE__*/_jsxs(\"p\",{children:[item.quantity,\" x $\",item.price,\" = \",/*#__PURE__*/_jsxs(\"b\",{children:[\"$\",item.quantity*item.price]})]})})]})}),/*#__PURE__*/_jsx(\"hr\",{})]});})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-3 my-4\",children:/*#__PURE__*/_jsxs(\"div\",{id:\"order_summary\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Order Summary\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Subtotal:  \",/*#__PURE__*/_jsxs(\"span\",{className:\"order-summary-values\",children:[\"$\",itemsPrice]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Shipping: \",/*#__PURE__*/_jsxs(\"span\",{className:\"order-summary-values\",children:[\"$\",shippingPrice]})]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Tax:  \",/*#__PURE__*/_jsxs(\"span\",{className:\"order-summary-values\",children:[\"$\",taxPrice]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Total: \",/*#__PURE__*/_jsxs(\"span\",{className:\"order-summary-values\",children:[\"$\",totalPrice]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{id:\"checkout_btn\",onClick:processPayment,className:\"btn btn-primary btn-block\",children:\"Proceed to Payment\"})]})})]})]});}","map":{"version":3,"names":["MetaData","Fragment","useEffect","validateShipping","useSelector","Link","useNavigate","CheckoutSteps","ConfirmOrder","state","cartState","shippingInfo","cartItems","items","authState","user","navigate","itemsPrice","reduce","acc","item","price","quantity","shippingPrice","taxPrice","Number","totalPrice","toFixed","processPayment","data","sessionStorage","setItem","JSON","stringify","name","phoneNo","address","city","postalCode","country","map","image","product"],"sources":["/Users/deborahketema/Downloads/jvlcart-main/frontend/src/components/cart/ConfirmOrder.js"],"sourcesContent":["import MetaData from '../layouts/MetaData';\nimport { Fragment, useEffect } from 'react';\nimport { validateShipping } from './Shipping';\nimport { useSelector } from 'react-redux';\nimport { Link, useNavigate } from 'react-router-dom';\nimport CheckoutSteps from './CheckoutStep';\n\nexport default function ConfirmOrder () {\n    const { shippingInfo, items:cartItems } = useSelector(state => state.cartState);\n    const { user } = useSelector(state => state.authState);\n    const navigate = useNavigate();\n    const itemsPrice = cartItems.reduce((acc, item)=> (acc + item.price * item.quantity),0);\n    const shippingPrice = itemsPrice > 200 ? 0 : 25;\n    let taxPrice = Number(0.05 * itemsPrice);\n    const totalPrice = Number(itemsPrice + shippingPrice + taxPrice).toFixed(2);\n    taxPrice = Number(taxPrice).toFixed(2)\n    \n    const processPayment = () => {\n        const data = {\n            itemsPrice,\n            shippingPrice,\n            taxPrice,\n            totalPrice\n        }\n        sessionStorage.setItem('orderInfo', JSON.stringify(data))\n        navigate('/payment')\n    }\n\n\n    useEffect(()=>{\n        validateShipping(shippingInfo, navigate)\n    },[])\n\n    return (\n        <Fragment>\n            <MetaData title={'Confirm Order'} />\n            <CheckoutSteps shipping confirmOrder />\n            <div className=\"row d-flex justify-content-between\">\n            <div className=\"col-12 col-lg-8 mt-5 order-confirm\">\n\n                <h4 className=\"mb-3\">Shipping Info</h4>\n                <p><b>Name:</b> {user.name}</p>\n                <p><b>Phone:</b> {shippingInfo.phoneNo}</p>\n                <p className=\"mb-4\"><b>Address:</b> {shippingInfo.address}, {shippingInfo.city}, {shippingInfo.postalCode}, {shippingInfo.state}, {shippingInfo.country} </p>\n                \n                <hr />\n                <h4 className=\"mt-4\">Your Cart Items:</h4>\n\n                    {cartItems.map(item => (\n                            <Fragment>\n                                <div className=\"cart-item my-1\">\n                                    <div className=\"row\">\n                                        <div className=\"col-4 col-lg-2\">\n                                            <img src={item.image} alt={item.name} height=\"45\" width=\"65\" />\n                                        </div>\n\n                                        <div className=\"col-5 col-lg-6\">\n                                            <Link to={`/product/${item.product}`}>{item.name}</Link>\n                                        </div>\n\n\n                                        <div className=\"col-4 col-lg-4 mt-4 mt-lg-0\">\n                                            <p>{item.quantity} x ${item.price} = <b>${item.quantity * item.price}</b></p>\n                                        </div>\n\n                                    </div>\n                                </div>\n                                <hr />\n                            </Fragment>\n                        )\n                    \n                        )\n                    \n                    }\n              \n              \n                \n\n            </div>\n\t\t\t\n            <div className=\"col-12 col-lg-3 my-4\">\n                    <div id=\"order_summary\">\n                        <h4>Order Summary</h4>\n                        <hr />\n                        <p>Subtotal:  <span className=\"order-summary-values\">${itemsPrice}</span></p>\n                        <p>Shipping: <span className=\"order-summary-values\">${shippingPrice}</span></p>\n                        <p>Tax:  <span className=\"order-summary-values\">${taxPrice}</span></p>\n\n                        <hr />\n\n                        <p>Total: <span className=\"order-summary-values\">${totalPrice}</span></p>\n\n                        <hr />\n                        <button id=\"checkout_btn\" onClick={processPayment} className=\"btn btn-primary btn-block\">Proceed to Payment</button>\n                    </div>\n            </div>\n        </div>\n        </Fragment>\n        \n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}