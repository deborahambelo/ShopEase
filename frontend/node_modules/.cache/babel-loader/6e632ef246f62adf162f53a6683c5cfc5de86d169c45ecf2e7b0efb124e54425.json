{"ast":null,"code":"import{Fragment,useEffect}from\"react\";import{Button}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{deleteProduct,getAdminProducts}from\"../../actions/productActions\";import{clearError,clearProductDeleted}from\"../../slices/productSlice\";import Loader from'../layouts/Loader';import{MDBDataTable}from'mdbreact';import{toast}from'react-toastify';import Sidebar from\"./Sidebar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProductList(){var _useSelector=useSelector(function(state){return state.productsState;}),_useSelector$products=_useSelector.products,products=_useSelector$products===void 0?[]:_useSelector$products,_useSelector$loading=_useSelector.loading,loading=_useSelector$loading===void 0?true:_useSelector$loading,error=_useSelector.error;var _useSelector2=useSelector(function(state){return state.productState;}),isProductDeleted=_useSelector2.isProductDeleted,productError=_useSelector2.error;var dispatch=useDispatch();var setProducts=function setProducts(){var data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Name',field:'name',sort:'asc'},{label:'Price',field:'price',sort:'asc'},{label:'Stock',field:'stock',sort:'asc'},{label:'Actions',field:'actions',sort:'asc'}],rows:[]};products.forEach(function(product){data.rows.push({id:product._id,name:product.name,price:\"$\".concat(product.price),stock:product.stock,actions:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(Link,{to:\"/admin/product/\".concat(product._id),className:\"btn btn-primary\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})]}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){return deleteHandler(e,product._id);},className:\"btn btn-danger py-1 px-2 ml-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})]})});});return data;};var deleteHandler=function deleteHandler(e,id){e.target.disabled=true;dispatch(deleteProduct(id));};useEffect(function(){if(error||productError){toast(error||productError,{position:toast.POSITION.BOTTOM_CENTER,type:'error',onOpen:function onOpen(){dispatch(clearError());}});return;}if(isProductDeleted){toast('Product Deleted Succesfully!',{type:'success',position:toast.POSITION.BOTTOM_CENTER,onOpen:function onOpen(){return dispatch(clearProductDeleted());}});return;}dispatch(getAdminProducts);},[dispatch,error,isProductDeleted]);return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-4\",children:\"Product List\"}),/*#__PURE__*/_jsx(Fragment,{children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setProducts(),bordered:true,striped:true,hover:true,className:\"px-3\"})})]})]});}","map":{"version":3,"names":["Fragment","useEffect","Button","useDispatch","useSelector","Link","deleteProduct","getAdminProducts","clearError","clearProductDeleted","Loader","MDBDataTable","toast","Sidebar","ProductList","state","productsState","products","loading","error","productState","isProductDeleted","productError","dispatch","setProducts","data","columns","label","field","sort","rows","forEach","product","push","id","_id","name","price","stock","actions","e","deleteHandler","target","disabled","position","POSITION","BOTTOM_CENTER","type","onOpen"],"sources":["/Users/deborahketema/Downloads/jvlcart-main/frontend/src/components/admin/ProductList.js"],"sourcesContent":["import { Fragment, useEffect } from \"react\"\nimport { Button } from \"react-bootstrap\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { Link } from \"react-router-dom\"\nimport { deleteProduct, getAdminProducts } from \"../../actions/productActions\"\nimport { clearError, clearProductDeleted } from \"../../slices/productSlice\"\nimport Loader from '../layouts/Loader';\nimport { MDBDataTable} from 'mdbreact';\nimport {toast } from 'react-toastify'\nimport Sidebar from \"./Sidebar\"\n\nexport default function ProductList() {\n    const { products = [], loading = true, error }  = useSelector(state => state.productsState)\n    const { isProductDeleted, error:productError }  = useSelector(state => state.productState)\n    const dispatch = useDispatch();\n\n    const setProducts = () => {\n        const data = {\n            columns : [\n                {\n                    label: 'ID',\n                    field: 'id',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Name',\n                    field: 'name',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Price',\n                    field: 'price',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Stock',\n                    field: 'stock',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Actions',\n                    field: 'actions',\n                    sort: 'asc'\n                }\n            ],\n            rows : []\n        }\n\n        products.forEach( product => {\n            data.rows.push({\n                id: product._id,\n                name: product.name,\n                price : `$${product.price}`,\n                stock: product.stock,\n                actions: (\n                    <Fragment>\n                        <Link to={`/admin/product/${product._id}`} className=\"btn btn-primary\"> <i className=\"fa fa-pencil\"></i></Link>\n                        <Button onClick={e => deleteHandler(e, product._id)} className=\"btn btn-danger py-1 px-2 ml-2\">\n                            <i className=\"fa fa-trash\"></i>\n                        </Button>\n                    </Fragment>\n                )\n            })\n        })\n\n        return data;\n    }\n\n    const deleteHandler = (e, id) => {\n        e.target.disabled = true;\n        dispatch(deleteProduct(id))\n    }\n\n    useEffect(() => {\n        if(error || productError) {\n            toast(error || productError, {\n                position: toast.POSITION.BOTTOM_CENTER,\n                type: 'error',\n                onOpen: ()=> { dispatch(clearError()) }\n            })\n            return\n        }\n        if(isProductDeleted) {\n            toast('Product Deleted Succesfully!',{\n                type: 'success',\n                position: toast.POSITION.BOTTOM_CENTER,\n                onOpen: () => dispatch(clearProductDeleted())\n            })\n            return;\n        }\n\n        dispatch(getAdminProducts)\n    },[dispatch, error, isProductDeleted])\n\n\n    return (\n        <div className=\"row\">\n        <div className=\"col-12 col-md-2\">\n                <Sidebar/>\n        </div>\n        <div className=\"col-12 col-md-10\">\n            <h1 className=\"my-4\">Product List</h1>\n            <Fragment>\n                {loading ? <Loader/> : \n                    <MDBDataTable\n                        data={setProducts()}\n                        bordered\n                        striped\n                        hover\n                        className=\"px-3\"\n                    />\n                }\n            </Fragment>\n        </div>\n    </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}