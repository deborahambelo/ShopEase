{"ast":null,"code":"import{Fragment,useEffect}from\"react\";import{Button}from\"react-bootstrap\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{deleteOrder,adminOrders as adminOrdersAction}from\"../../actions/orderActions\";import{clearError,clearOrderDeleted}from\"../../slices/orderSlice\";import Loader from'../layouts/Loader';import{MDBDataTable}from'mdbreact';import{toast}from'react-toastify';import Sidebar from\"./Sidebar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function OrderList(){var _useSelector=useSelector(function(state){return state.orderState;}),_useSelector$adminOrd=_useSelector.adminOrders,adminOrders=_useSelector$adminOrd===void 0?[]:_useSelector$adminOrd,_useSelector$loading=_useSelector.loading,loading=_useSelector$loading===void 0?true:_useSelector$loading,error=_useSelector.error,isOrderDeleted=_useSelector.isOrderDeleted;var dispatch=useDispatch();var setOrders=function setOrders(){var data={columns:[{label:'ID',field:'id',sort:'asc'},{label:'Number of Items',field:'noOfItems',sort:'asc'},{label:'Amount',field:'amount',sort:'asc'},{label:'Status',field:'status',sort:'asc'},{label:'Actions',field:'actions',sort:'asc'}],rows:[]};adminOrders.forEach(function(order){data.rows.push({id:order._id,noOfItems:order.orderItems.length,amount:\"$\".concat(order.totalPrice),status:/*#__PURE__*/_jsx(\"p\",{style:{color:order.orderStatus.includes('Processing')?'red':'green'},children:order.orderStatus}),actions:/*#__PURE__*/_jsxs(Fragment,{children:[/*#__PURE__*/_jsxs(Link,{to:\"/admin/order/\".concat(order._id),className:\"btn btn-primary\",children:[\" \",/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-pencil\"})]}),/*#__PURE__*/_jsx(Button,{onClick:function onClick(e){return deleteHandler(e,order._id);},className:\"btn btn-danger py-1 px-2 ml-2\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fa fa-trash\"})})]})});});return data;};var deleteHandler=function deleteHandler(e,id){e.target.disabled=true;dispatch(deleteOrder(id));};useEffect(function(){if(error){toast(error,{position:toast.POSITION.BOTTOM_CENTER,type:'error',onOpen:function onOpen(){dispatch(clearError());}});return;}if(isOrderDeleted){toast('Order Deleted Succesfully!',{type:'success',position:toast.POSITION.BOTTOM_CENTER,onOpen:function onOpen(){return dispatch(clearOrderDeleted());}});return;}dispatch(adminOrdersAction);},[dispatch,error,isOrderDeleted]);return/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-md-2\",children:/*#__PURE__*/_jsx(Sidebar,{})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-12 col-md-10\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"my-4\",children:\"Order List\"}),/*#__PURE__*/_jsx(Fragment,{children:loading?/*#__PURE__*/_jsx(Loader,{}):/*#__PURE__*/_jsx(MDBDataTable,{data:setOrders(),bordered:true,striped:true,hover:true,className:\"px-3\"})})]})]});}","map":{"version":3,"names":["Fragment","useEffect","Button","useDispatch","useSelector","Link","deleteOrder","adminOrders","adminOrdersAction","clearError","clearOrderDeleted","Loader","MDBDataTable","toast","Sidebar","OrderList","state","orderState","loading","error","isOrderDeleted","dispatch","setOrders","data","columns","label","field","sort","rows","forEach","order","push","id","_id","noOfItems","orderItems","length","amount","totalPrice","status","color","orderStatus","includes","actions","e","deleteHandler","target","disabled","position","POSITION","BOTTOM_CENTER","type","onOpen"],"sources":["/Users/deborahketema/Downloads/ShopEase/frontend/src/components/admin/OrderList.js"],"sourcesContent":["import { Fragment, useEffect } from \"react\"\nimport { Button } from \"react-bootstrap\"\nimport { useDispatch, useSelector } from \"react-redux\"\nimport { Link } from \"react-router-dom\"\nimport { deleteOrder, adminOrders as adminOrdersAction } from \"../../actions/orderActions\"\nimport { clearError, clearOrderDeleted } from \"../../slices/orderSlice\"\nimport Loader from '../layouts/Loader';\nimport { MDBDataTable} from 'mdbreact';\nimport {toast } from 'react-toastify'\nimport Sidebar from \"./Sidebar\"\n\nexport default function OrderList() {\n    const { adminOrders = [], loading = true, error, isOrderDeleted }  = useSelector(state => state.orderState)\n\n    const dispatch = useDispatch();\n\n    const setOrders = () => {\n        const data = {\n            columns : [\n                {\n                    label: 'ID',\n                    field: 'id',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Number of Items',\n                    field: 'noOfItems',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Amount',\n                    field: 'amount',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Status',\n                    field: 'status',\n                    sort: 'asc'\n                },\n                {\n                    label: 'Actions',\n                    field: 'actions',\n                    sort: 'asc'\n                }\n            ],\n            rows : []\n        }\n\n        adminOrders.forEach( order => {\n            data.rows.push({\n                id: order._id,\n                noOfItems: order.orderItems.length,\n                amount : `$${order.totalPrice}`,\n                status: <p style={{color: order.orderStatus.includes('Processing') ? 'red' : 'green'}}>{order.orderStatus}</p> ,\n                actions: (\n                    <Fragment>\n                        <Link to={`/admin/order/${order._id}`} className=\"btn btn-primary\"> <i className=\"fa fa-pencil\"></i></Link>\n                        <Button onClick={e => deleteHandler(e, order._id)} className=\"btn btn-danger py-1 px-2 ml-2\">\n                            <i className=\"fa fa-trash\"></i>\n                        </Button>\n                    </Fragment>\n                )\n            })\n        })\n\n        return data;\n    }\n\n    const deleteHandler = (e, id) => {\n        e.target.disabled = true;\n        dispatch(deleteOrder(id))\n    }\n\n    useEffect(() => {\n        if(error) {\n            toast(error, {\n                position: toast.POSITION.BOTTOM_CENTER,\n                type: 'error',\n                onOpen: ()=> { dispatch(clearError()) }\n            })\n            return\n        }\n        if(isOrderDeleted) {\n            toast('Order Deleted Succesfully!',{\n                type: 'success',\n                position: toast.POSITION.BOTTOM_CENTER,\n                onOpen: () => dispatch(clearOrderDeleted())\n            })\n            return;\n        }\n\n        dispatch(adminOrdersAction)\n    },[dispatch, error, isOrderDeleted])\n\n\n    return (\n        <div className=\"row\">\n        <div className=\"col-12 col-md-2\">\n                <Sidebar/>\n        </div>\n        <div className=\"col-12 col-md-10\">\n            <h1 className=\"my-4\">Order List</h1>\n            <Fragment>\n                {loading ? <Loader/> : \n                    <MDBDataTable\n                        data={setOrders()}\n                        bordered\n                        striped\n                        hover\n                        className=\"px-3\"\n                    />\n                }\n            </Fragment>\n        </div>\n    </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}